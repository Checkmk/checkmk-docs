// -*- coding: utf-8 -*-
// IGNORE [ ]
include::global_attr.adoc[]
= Analyzing the {CMK} site configuration
:revdate: draft
:title: Analyzing the {CMK} site configuration
:description: Analyze configuration allows you to check the site of the {CMK} server for performance, security, processor utilization and more.

{related-start}
xref:wato#[Configuring {CMK}]
xref:intro_bestpractise#[Best practices, tips & tricks]
xref:security#[Security]
{related-end}


[#intro]
== Introduction

Once your {CMK} server has been set up and configured, sooner or later questions will come up: 
Can the configuration be performed more quickly?
Can it be optimized?
Can the system be made more secure?

One approach to answering these questions is to review and consequently optimize the xref:glossar#site[site] setup on the {CMK} server.
The more performant your system is, the faster and more effectively it works.
So the more reliably you can secure your site, the more confident you can be when working with it.

{CMK} quickly and clearly analyzes the essential parameters associated with the current site as well as any attached sites in the case of a xref:glossar#distributed_monitoring[distributed monitoring].

The hosts and services within your site(s) are not affected by these checks, they are still shown in the xref:views#[views of hosts and services].
The results of the _checks_ for the site covered here are displayed on the [.guihint]#Setup > Maintenance > Analyze configuration# page.

[TIP]
====
When [.guihint]#Analyze configuration# is called, the current state of all checks is always assessed and displayed.
Therefore, after calling the menu item it may take a little while before the page with the results is displayed:
====

// This block replaces the following text
// start translation
////
.Die Standard-Checks in der {RE}
image::analyze_config.png[alt="Ergebnis der 'Analyze configuration'."]

Der obige Screenshot zeigt die Checks, die in der {RE} für eine einzelne Instanz standardmäßig ausgeführt werden.
Das ist aber nicht die ganze Wahrheit, denn es können durchaus mehr Checks angeboten werden.
Welche das sind, hängt zum Beispiel davon ab, ob Sie die {RE} oder eine der kommerziellen Editionen installiert haben, ob Ihre Instanz im verteilten Monitoring genutzt wird, ob eine bestimmte Regel eingerichtet ist, eine LDAP-Verbindung existiert, eine globale Einstellung gesetzt ist -- oder sogar vom Wert einer Option in einer Regel.
Welcher Check für Ihre Instanz relevant ist -- darum kümmert sich {CMK}.
////
// end translation

// delete from here
image::analyze_config.png[alt="Overview of the configuration analysis."]
// delete to here


[#interpreting]
== Interpreting the analysis

The analyzed site data is divided into different categories as checks.
Each check has a colored status display.
A check can have the following states after analysis:

[cols="10,10,~",options="header"]
|===
|State |Color |Description 
|{OK} |green |The check is completely fine. All checked values are considered optimal.
|{WARN} |yellow |The check is basically fine, but {CMK} has identified potential for improvement.
|{CRIT} |red |The check has detected critical values. These should be examined and fixed if necessary to ensure a smooth operation of {CMK}.
|===

Let's consider the [.guihint]#Backup configured# check with two sites in a distributed monitoring:

image::analyze_config_backup.png[alt="Section of the 'Backup configured' check."]

This check is in a {WARN} state, so an icon:button_ackn_test[alt="Button to acknowledge the message."] button appears after the {WARN} for acknowledging this.
This button also appears for checks in the {CRIT} state.
Acknowledgement causes the yellow or red color of the state to disappear.
The entry itself remains, but becomes visually more discreet.
If the check is acknowledged, the button changes to icon:button_unackn_test[alt="Button to cancel the acknowledgement."].
This button can be used to cancel the acknowledgement.

In general, it makes sense to check the system environment for all parameters.
However, if you do not want to run individual checks (again), you can disable any of the checks by clicking on the associated icon:button_disable_test[alt="Button to disable a test."] button.
For example, turn off the [.guihint]#Backup configured# check if your organization uses a different solution for backup creation.


[#checks_detail]
== The checks in detail

For each check, clicking on the associated icon:button_info[alt="Show more information button."] button will give you more details on the detected values, an assessment of the status, as well as hints for optimization. 

image::analyze_config_backup_ext.png[alt="Detailed view of 'Backup configured'."]

Much can be readily understood and acted upon based on this.
// This block replaces the following text
// start translation
////
Für die folgenden Themen bietet dieses Handbuch -- aber auch andere Quellen -- zusätzliche Informationen:

[cols="15,30,~",options="header"]
|===
|Kategorie |Check |Weiterführende Informationen
|[.guihint]#Connectivity# |
[.guihint]#Site connectivity# |
Im verteilten Monitoring können Remote-Instanzen wegen xref:distributed_monitoring#wan[instabiler oder langsamer Verbindungen] möglicherweise nicht erreicht werden.

.2+|[.guihint]#Deprecations# |
[.guihint]#Deprecated HW/SW inventory plug-ins# |
Im link:https://checkmk.com/de/werk/14084[Werk pass:q[#]14084^] finden Sie weitere Details und Informationen zur Migration von Plugins, die noch die alte API für die HW/SW-Inventur nutzen.

|[.guihint]#Deprecated check plug-ins# |
Im Handbuch finden Sie Artikel über die xref:devel_intro#[Entwicklung von Erweiterungen für {CMK}] und das xref:devel_check_plugins#[Schreiben von agentenbasierten Check-Plugins] mit der in Version {v20} eingeführten Check-API.
Für die Migration alter Check-Plugins gibt es ausführliche Informationen in link:https://checkmk.com/de/blog/migrating-check-plug-ins-to-checkmk-2-0[diesem Blog-Artikel.^]

.10+|[.guihint]#Performance# |
[.guihint]#Check helper usage# .5+|
xref:cmc_differences#aux_processes[Hilfsprozesse] für den {CMK} Micro Core (CMC) der kommerziellen Editionen.

|[.guihint]#Checkmk checker count#

|[.guihint]#Checkmk checker usage#

|[.guihint]#Checkmk fetcher usage#

|[.guihint]#Checkmk helper usage#

|[.guihint]#Livestatus usage# |
xref:livestatus#keepalive[Verbindung aufrecht erhalten (KeepAlive)]

|[.guihint]#Persistent connections# |
xref:distributed_monitoring#persistent[Persistente Verbindungen] zwischen Zentral- und Remote-Instanzen im verteilten Monitoring.

|[.guihint]#Number of users# |
xref:ldap#[Benutzerverwaltung mit LDAP/Active Directory]

|[.guihint]#Size of extensions# |
Im verteilten Monitoring werden die Daten zwischen Zentral- und Remote-Instanzen eventuell deshalb langsam synchronisiert, weil die xref:mkps#distr_wato[Synchronisation von Erweiterungen wie MKPs] eingeschaltet ist.

|[.guihint]#Use Livestatus Proxy Daemon# |
xref:distributed_monitoring#livestatusproxy[Der Livestatus-Proxy] der kommerziellen Editionen für Verbindungen zwischen Zentral- und Remote-Instanzen im verteilten Monitoring.

|[.guihint]#Reliability# |
[.guihint]#Backups configured# |xref:backup#[Backups]

.6+|[.guihint]#Security# |
[.guihint]#Encrypt backups# |
xref:backup#backup_config[Verschlüsselte Backups konfigurieren]

|[.guihint]#Encrypt notification daemon communication# |
Im link:https://checkmk.com/de/werk/13610[Werk pass:q[#]13610^] steht, wie Sie die Transportverschlüsselung des Notification Spooler `mknotifyd` aktivieren können.

|[.guihint]#Livestatus encryption# |
xref:distributed_monitoring#livestatus_tls[Livestatus verschlüsselt anbinden] für Instanzen, die Livestatus über das Netzwerk (TCP) aktiviert haben.

|[.guihint]#Secure Agent Updater# |
xref:agent_deployment#setup_automatic_updates[Automatische Updates einrichten] in den kommerziellen Editionen.

|[.guihint]#Secure GUI (HTTP)# |
xref:omd_https#[Weboberfläche mit HTTPS absichern]

|[.guihint]#Secure LDAP# |
xref:ldap#ssl[LDAP mit SSL absichern] für eingerichtete LDAP-Verbindungen
|===
////
// end translation

// delete from here
For the following topics this User Guide and other sources offer additional supplementary information:

For the following topics the User Guide offers additional supplementary articles:

[cols="15,28,~",options="header"]
|===
|Category |Check |Additional information
|[.guihint]#Connectivity# |[.guihint]#Site connectivity# |If you are using distributed monitoring, a message may be based on xref:distributed_monitoring#wan[unstable or slow connections].
.7+|[.guihint]#Performance# |[.guihint]#Check helper usagefootnote:Cee_only[This check is only present in the commercial editions.]# .5+.^|xref:cmc_differences#aux_processes[{CMK} auxiliary processes]
|[.guihint]#Checkmk checker countfootnote:Cee_only[]#
|[.guihint]#Checkmk checker usagefootnote:Cee_only[]#
|[.guihint]#Checkmk fetcher usagefootnote:Cee_only[]#
|[.guihint]#Checkmk helper usagefootnote:Cee_only[]#
|[.guihint]#Livestatus usage# |xref:livestatus#keepalive[Keeping a connection alive (KeepAlive)]
|[.guihint]#Number of users# |xref:ldap#[User management with LDAP/Active Directory]
|[.guihint]#Reliability# |[.guihint]#Backups configured# |xref:backup#[Backups]
.2+|[.guihint]#Security# |[.guihint]#Encrypt backups# |xref:backup#backup_config[Configuring encrypted backups]
|[.guihint]#Secure GUI (HTTP)# |xref:omd_https#[Securing the web interface with HTTPS]
|===
// delete to here

In addition, the article on xref:security#[Security] provides an overview of other security-related matters relevant to {CMK}.
