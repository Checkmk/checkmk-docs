// -*- coding: utf-8 -*-
// IGNORE % b5 p27 p28 p29 ×
// NONASCII 
include::global_attr.adoc[]
= Update to version 2.4.0
:title: Update to version {current-major}
:description: When updating from {CMK} version {oldstable} to {current-major}, some preparations and follow-ups are required. Here you will find detailed instructions for the update.
:experimental:

{related-start}
xref:update#[Updates and Upgrades]
xref:install_packages#[Basic information on the installation of {CMK}]
{related-end}


[#intro]
== Introduction

In this article you will find the most important topics relevant to an update of your {CMK} installation from version {oldstable} to {current-major}.

We recommend that you read through the entire article before updating so that you know exactly what to expect: before, during and after the update.

[TIP]
====
This article will continue to be revised after the release of {CMK} {current-major}.
If an important topic is missing, report link:https://github.com/Checkmk/checkmk-docs/issues[an issue via GitHub].
====


[#path]
=== Update path

Updates from {CMK} must always be performed from the last patch release of the source version to the last patch release of the target version.
An update from {oldstable}p1 to {current} therefore follows this path:

{oldstable}p1 [.fa-light.fa-arrow-right-long]#&nbsp;# {oldstable-patch} [.fa-light.fa-arrow-right-long]#&nbsp;# {current}

Major versions cannot be skipped.
If you want to update from {oldoldstable} to {current-major}, first perform an link:https://docs.checkmk.com/{oldstable}/en/update_major.html[Update to version {oldstable}].


[#prep]
== Preparations

This chapter gives you an overview of the things you should take into consideration before you perform the update.
Probably not every item will be relevant for you:
For each topic, you can check the corresponding box for your own reference and immediately move on to the next topic.


[#backup]
=== Backup

As with any update to production software, you should check that your backups are up to date before performing the update of {CMK}.

*Does this affect you?*
Yes.

*What will you need to do?*
If you create your backups automatically via [.guihint]#Setup > Maintenance > Backups#, check there that your backups are up to date and that the most recent backup jobs have completed without errors.

For more information, see the articles on xref:backup#[Backups] and on xref:omd_basics#omd_backup_restore[Backing up and restoring sites].

[TIP]
====
From the update to {v23}, changes are rolled back in the event of a failed update (link:https://checkmk.com/werk/16408[Werk pass:q[#]16408^]).
An update can fail due to an unexpected internal error, but also due to user input during the update process, for example by selecting the menu option `abort` or by pressing the key combination kbd:[Ctrl+C].
Only when the text `Completed verifying site configuration. Your site now has version {v24}pX` is displayed, will the updated configuration be active.
Restoring the configuration does not replace a backup, but usually reduces downtime if something goes wrong.
====


[#performance]
=== Check the hardware utilization

{CMK} {v24} requires slightly higher system resources than {v23}.
It is therefore advisable to find out before updating which free capacity the servers used for {CMK} still have. 

*Does this affect you?*
Yes, but the extent to which you are affected depends heavily on how you use {CMK}.

*What will you need to do?*
Make sure that there is sufficient free capacity available.
For information on the expected changes in the use of hardware resources, refer to the following table:

[cols="17,~"]
|===
|*Processor load* |A slightly higher processor load is to be expected when using many active checks.
Other areas could be optimized as required, which in many cases leads to a reduction in the processor load.
As a rule of thumb: If the _CPU load_ is below the _number of processor cores × 0.8_ and the _CPU utilization_ is below 70{nbsp}%, no problems are to be expected.

|*Memory usage* |The memory usage of {CMK} {v24} is about 30{nbsp}% higher compared to {v23}.
The reason for this is more extensive caching of frequently required data, which leads to lower latencies and higher performance at the expense of memory usage.

When using piggyback in distributed monitoring, the RabbitMQ message broker requires additional RAM and CPU resources.
The same applies to the Open Telemetry Receiver.

|*Disk space* |The hard disk space requirement increases by up to 5{nbsp}MB per host with {CMK} {v24}.
This additional disk space will be occupied immediately after the update.

|===

////
A slightly higher processor load is to be expected when using many active checks.
Other areas could be optimized as required, which in many cases leads to a reduction in the processor load.
As a rule of thumb: If the _CPU load_ is below the _number of processor cores × 0.8_ and the _CPU utilization_ is below 70{nbsp}%, no problems are to be expected.

The memory usage of {CMK} {v24} is about 30{nbsp}% higher compared to {v23}.
The reason for this is more extensive caching of frequently required data, which leads to lower latencies and higher performance at the expense of memory usage.

When using piggyback in distributed monitoring, the RabbitMQ message broker requires additional RAM and CPU resources.
The same applies to the Open Telemetry Receiver.

The hard disk space requirement increases by up to 5{nbsp}MB per host with {CMK} {v24}.
This additional disk space will be occupied immediately after the update.
////


[#linux_versions]
=== Linux distribution versions

Some obsolete distributions will no longer be supported under {CMK} version {v24}.

*Does this affect you?*
This will affect you if any of the following Linux distributions -- still supported in {v23} -- is installed on your {CMK} server:

* Debian 10
* SLES 12 SP5
* Ubuntu 20.04

.What will you need to do? Upgrade your Linux distribution version
[%collapsible]
====
If you are currently using one of the Linux distribution versions listed above, this must first be updated.
Before updating {CMK}, first perform an xref:release_upgrade#[version upgrade of the Linux distribution].
Make sure that the target version of the Linux distribution is supported by {CMK} {v23} *and* {v24}.
You can find out which Linux distribution versions {CMK} supports in the xref:update_matrix#[Update matrix for version {v24}] and on the link:https://checkmk.com/download[download page^] after you have selected the {CMK} version and your Linux distribution.

After the release of Red Hat Enterprise Linux 10, we will provide {CMK} {v23} and {v24} packages for this distribution version.
This will allow you to first update to the latest patch version of {CMK} {v23}, then update from Red Hat Enterprise Linux 9 to 10 and finally update to the latest patch version of {CMK} {v24}.
====


[#browser]
=== Browser support

{CMK} {v24} uses new JavaScript features that are not available in older browsers.
Which browsers are supported in which versions can be found in the xref:release_notes#browser[System requirements].

*Does this affect you?*
You will usually have automatic updates to the latest version enabled on desktop systems.

*What will you need to do?*
Check the browser version you are using and install a more recent browser if necessary.
If you are using _single board computers_, _smart TVs_ or _digital signage_ solutions to display dashboards and you have no control over the system browser, test that any required dashboards are displayed correctly before updating.
If necessary, contact the hardware manufacturer for updates.

[TIP]
====
If you are using link:https://www.mozilla.org/en-US/firefox/enterprise/[Firefox ESR^], wait with the update of {CMK} until you have updated Firefox from link:https://whattrainisitnow.com/calendar/[version 128 to 140^].
Firefox ESR 140 will be available from the end of June and will be the only supported ESR version as of the end of September.
====


[#automation_login]
=== Authentication by GET parameter

Up to {CMK} {v22}, every xref:glossar#automation_user[automation user] could be logged in with a username and password passed via GET parameters.
This option has been reduced as of {CMK} {v23} and will be completely removed in version {v25} (link:https://checkmk.com/werk/16223[Werk pass:q[#]16223^]).
In the medium term, you must therefore switch your scripts to authentication via HTTP headers.

First, {v23} made the option of logging in via the GET parameter configurable.
However, the global setting [.guihint]#Enable automation user authentication via HTTP parameters# initially used [.guihint]#on# as the default.
In {CMK} {v24} default now changes to [.guihint]#off#.


*Does this affect you?*
This change also primarily affects users who display dashboards using _single board computers_, _smart TVs_ or _digital signage_ solutions without a connected keyboard.

*What will you need to do?*
If you use automatic login via GET parameters, you must change the global setting [.guihint]#Automation user authentication via HTTP parameters# to [.guihint]#on#.
As the option of logging in via GET parameters will be completely removed with {CMK} {v25}, you should switch the login of such dashboards to `Basic Auth` (for example, via a browser extension).


[#ntopng56_deprecation]
=== ntopng 5.6 and older are no longer supported

{CMK} {v23} is the last version that supports xref:ntop#[ntopng] in versions 5.x _and_ 6.x (link:https://checkmk.com/werk/16483[Werk pass:q[#]16483^]).
With {CMK} {v24}, support for ntopng 5.x is discontinued and only ntopng 6.x will be supported.

*Does this affect you?*
This change affects users of the commercial editions that use the integration with ntopng.

*What will you need to do?*
Update your ntopng installations to 6.x before updating {CMK} to {v24}.


[#run_api_integrations]
=== Changes to the execution of special agents

If xref:glossar#special_agent[special agents] are configured for a host, in {CMK} {v24} _all_ of these special agents will be executed.
In earlier versions only _one_ special agent was executed, namely the first one in the alphabetical sorting.

*Does this affect you?*
This change is only relevant for hosts in whose properties the [.guihint]#{CMK} agent / API integrations# attribute is set to [.guihint]#API integrations if configured, else {CMK} agent#.

It is possible that you have inadvertently created rules that have assigned more special agents to hosts than required.
These additional rules were previously ignored if they were alphabetically after the first one.
Example: You have created rules for `agent_acme` and rules for `agent_cyberdyne` and assigned these rules to the same hosts due to a small oversight.
In {CMK} {v24} not only `agent_acme` but also `agent_cyberdyne` will now be executed for these hosts.

.What will you need to do? Assign rules for special agents correctly
[%collapsible]
====
When using special agents that access APIs that can unnecessarily increase costs or run into _rate limiting_, you must take _preparatory_ action and ensure correct assignment.
Also ensure correct assignment for special agents that cause a high CPU load or a lot of network traffic. 
Furthermore, bear in mind that if special agents are incorrectly assigned to hosts, services may suddenly appear that do not belong there.
====


[#pip3]
=== Uninstalling Python modules

{CMK} {v24} updates Python to 3.12.3.
This update affects modules installed to a {CMK} site.
In many cases, post-installed modules are incompatible with Python 3.12.3.
In the worst case, obsolete modules overwrite the functionality of the modules supplied by {CMK}.

*Does this affect you?*
This will apply to you if Python modules have been installed in your site.
This may be the case, for example, if you have previously installed Python modules for special agents or agent-based check plug-ins that you have written yourself or obtained from the Exchange.

The use of the `check_sql` active check for monitoring Oracle databases also requires careful consideration:
Up to {CMK} {v23}p27 you had to install the `oracledb` module in order to be able to use this check.
Since {v23}p28 this module is supplied with {CMK} (link:https://checkmk.com/werk/17370[Werk pass:q[#]17370^]).

To find out if Python modules have been installed in your site, look for the `dist-info` and `egg-info` directories:

[{shell}]
----
{c-omd} find ~/local/lib/python3/ -type d -name '*.*-info'
local/lib/python3/cryptography-41.0.5.dist-info
local/lib/python3/ecdsa-0.18.0.dist-info
----

If the search result is not an empty list, you will need to take action.

.What do you need to do? Make a note of any Python modules that have been installed and uninstall them
[%collapsible]
====
Make a note of all installed modules and then uninstall them:

[{shell}]
----
{c-omd} pip3 uninstall cryptography ecdsa
----

To learn how to handle uninstalled Python modules after the update, see xref:pip3post[below].
====


[#local_files]
=== Packaged (MKPs) and non-packaged local files

Local files allow you to customize and extend the functionality provided by {CMK}.
These files are located in the local part of the site directory structure, i.e. in `~/local` and can be located in extension packages or simply 'lying around'.
Local files can cause problems during an update if they no longer match the new {CMK} version.

*Does this affect you?*
Since it is not possible for {CMK} to fully ensure the compatibility of local adaptations during an update, you should check your {CMK} site before an update to see whether local files are used, which ones they are and how they are organized.

First, use `mkp list` to search for xref:mkps#[extension packages (MKPs)] present in the site.

Also use `mkp find` to get an xref:mkps#find_unpackaged[overview] of _unpackaged_ local files in your {CMK} site.

If the output for one or both of these commands is not empty, you will need to take action.

.What will you have to do? Organize MKPs and unpackaged local files
[%collapsible]
====
. For the MKPs found with `mkp list`, you will need to distinguish whether they are extensions you developed yourself or externally sourced MKPs.
You can usually easily test the extensions you have developed yourself and adapt them if necessary.
For externally sourced MKPs, you should research whether there are known problems with {CMK} {current-major} and whether new versions are available.
In cases where functionality previously provided by the MKP is now provided by {CMK} {current-major}, deactivate the package before updating.

. If by using `mkp find` you have found local files:
Combine the files that belong together into xref:mkps#package_mkp[MKPs].
This will make it easier to later deactivate these _en bloc_ if incompatibilities are detected following the update.
If file paths with `python3` appear here, go back to xref:pip3[Python modules].

. In the case of MKPs that require different versions for {CMK} {oldstable} and {current-major}, you should have installed xref:mkps#enabled_inactive_cli[both package versions with correct compatibility information] in {CMK} before performing the update.
If different versions of a package are available, {CMK} automatically activates the appropriate version during the update.
As central sites with {CMK} {oldstable} can hold packages for {current-major} and distribute these to remote sites, this feature also helps when updating in a xref:glossar#central_setup[distributed monitoring with central setup].

[.admonition-tip]
****
If you have activated the MKP for the Redfish special agent supplied in version {v23}, deactivate it before the update.
The presence of the package causes error messages during the update.
****
====


[#apis]
=== Programming interfaces

In {CMK} {v23} some programming interfaces (APIs) that were defined _ad-hoc_ in older versions already were replaced by versioned, well-specified ones.
The older APIs could continue to be used in parallel.
With {CMK} {v24} no further measures are taken to maintain compatibility with the old APIs (link:https://checkmk.com/werk/17201[Werk pass:q[#]17201^]).
This means that plug-ins that use the old APIs will no longer work with {CMK} {v24}.

*Does this affect you?*
The topic of APIs affects you if you have extended the check plug-ins delivered with {CMK} with your own, self-written plug-ins and/or if you use plug-ins from other sources.

.What will you need to do? Review and migrate self-written and externally-sourced plug-ins
[%collapsible]
====
Before updating to {v24}, first make sure that you have updated to the latest patch version of {v23}.
Existing extensions that will no longer work after an update to {v24} will then lead to messages being displayed in the GUI repeatedly for all users with the permission to manage MKPs (link:https://checkmk.com/werk/17649[Werk pass:q[#]17649^]).

Review extensions that you have written yourself and those from third-party providers for the use of the current APIs (`cmk.agent_based.v2`,  `cmk.server_side_calls.v1`, `cmk.graphing.v1` and `cmk.rulesets.v1`).
If the older, non-versioned APIs or `cmk.agent_based.v1` are used, migrate them to the new APIs and the new folder structure.
You can find information on migration in link:https://checkmk.com/werk/16259[Werk pass:q[#]16259^] and in the xref:devel_intro#[articles on developing check plug-ins].
You can also find scripts that can help with the migration on link:https://github.com/Checkmk/checkmk/tree/master/doc/treasures/migration_helpers/[GitHub^].

[.admonition-important]
****
We provide files in the `treasures` directory because they may be useful for our community.
However, they are not part of the product {CMK} itself.
Scripts in `treasures` are excluded from support.
Use these scripts at your own risk.
****

If you use non-public APIs in plug-ins, test all the more intensively with {v23} and {v24}.
Some changes have been made to the 'internal toolbox', for example xref:devel_check_plugins.html#custom_debug[effects on the detection of the debug flag].
====


[#rest_api]
=== Deprecations in the REST API

Deprecated endpoints or parameters of the {CMK} REST API are marked in the API documentation with the icon:icon_rest_api_deprecated[alt="Icon to indicate a deprecation in the REST API documentation] icon.

*Does this affect you?*
This may affect you if you use the {CMK} REST API in your own scripts, for example.

*What will you need to do?*
Open the REST API documentation with [.guihint]#Help > Developer Resources > REST API documentation#.
Search for `Deprecated` in the browser on the page, check whether you are using deprecated elements in your scripts and replace them before updating.
In the REST API documentation, you will usually find instructions on how to replace the functions that no longer exist in the new version.


[#incompatible]
=== Incompatible changes

As in every {CMK} version, there are also changes to the software in the current {v24} version which _may_ have repercussions on your {CMK} installation -- at {CMK} these are organized and documented in what we refer to as our {CMK} xref:glossar.html#werk[Werks].
A so-called _incompatible change_ requires that you make manual modifications in order to allow existing functions to continue to run as usual and/or to be able to use new functions.

*Does this affect you?*
In general, there will be incompatible changes that will also affect your {CMK} installation, it is however impossible to make a general statement.
In this article we have collected those issues that apply to all or most {CMK} installations.
In any case there may be additional changes that are relevant to you, for example in checks that you use in your installation.

*What will you need to do?*
Following every update -- including patch versions -- {CMK} will show you the number and content of incompatible changes and ask you to check and take note of them.
Before performing the update is the right time to check for any changes from version {v23} that may have an impact on the update.
Since {CMK} {v23}, such Werks are no longer carried over, but are deleted during the update after approving a confirmation dialog (link:https://checkmk.com/werk/15292[Werk #15292^]).

It is also a good idea to get an overview of the incompatible changes in version {v24} *before* the update:
Open the list of link:https://checkmk.com/werks?search=&cmk_version$$[$$$$]$$=2.3&compatible=0[Werks^] on the {CMK} website.
In the description of a Werk, you will find information on what you may need to do to make the change compatible.

After you have carried out the xref:update[update], the number and content of the incompatible changes will be displayed in the {CMK} interface and you will be asked to check and take note of them.
Links help you to check so that you can find out with just a few clicks whether you are using an affected component.
If it is certain that a Werk has no impact or you have made the required changes, confirm the Werk with [.guihint]#Acknowledge#.


[#update]
== Update

[#dry_run]
=== Best practices when updating

In this section we describe the best practices that we follow even when updating large {CMK} environments.
These are certainly not mandatory in every environment, but they can make the process of updating easier for you.


[#update_patch]
==== Updating the {CMK} version

As a prerequisite, before updating to version {v24}, version {v23} *must* have been installed on the {CMK} site.

The update to {v24} currently requires at least {v23}p29.
However, in the future, a specific {v24} patch version may require a higher {v23} patch version for the update.
In general, we recommend updating {CMK} to the latest {v23} patch version first, and only then updating to the latest {v24} patch version.


==== Perform a test run of the update

In large environments, where obviously even restoring a current backup of your {CMK} environment could take quite some time, it is recommended to perform a test with a cloned site before updating the production environment.
For this purpose, you can, for example, restore the last regular backup of your site under a different name.

[{shell}]
----
{c-root} omd restore newsite /path/to/backup
----

*Alternatively* you can also copy your site using `omd cp`.
For this, however, the site must be stopped for a short time:

[{shell}]
----
{c-root} omd stop mysite
{c-root} omd cp mysite newsite
----

Then, perform the update first on this new cloned site, for example to check the above mentioned local changes in the new environment.


[#automatic_agent_updates]
==== Temporarily disable agent updates

{cee-only}
If you are using the automatic agent updates in the commercial editions, you should consider disabling them temporarily before updating {CMK} so as to be able to later switch to the new agents at the hosts in a controlled manner.
To do this, first select [.guihint]#Setup > Agents > Windows, Linux, Solaris, AIX# and on the following page select the menu item [.guihint]#Agents > Automatic updates#.
By clicking on the icon:icon_edit[alt="Icon to edit a list entry."] button in front of the [.guihint]#Master switch# you can disable the agent update completely:

image::update_major_automatic_agent_updates.png[alt=" Disabling agent update using the master switch."]

Following a successful update of {CMK}, you can reactivate the agent updates in the same way.

At this point, we recommend that you initially only reactivate the automatic agent updates for individual hosts or host groups.
By doing so, the new agent will not be rolled out to all of your servers right away and you can familiarize yourself with the newly delivered data on a few systems.
Also, due to the significant increase in the number of check plug-ins supplied, you might find a whole new set of services that you can then set up properly on the test systems of your choice.
You may also need to define new thresholds for new services.
If you tackle this on a small scale first, you will be able to minimize unnecessary false positives.

On the [.guihint]#Automatic agent updates# page above, you can simply enter a few hosts or host groups in the corresponding fields and then re-enable the [.guihint]#Master switch#.

image::update_major_activate_update_on_selected_hosts.png[alt="Options when updating agents to activate on specific hosts."]

[IMPORTANT]
====
Remember to remove these restrictions on explicit hosts and host groups again once you are satisfied with the results.
====


[#notifications]
==== Temporarily disable notifications

You should also consider turning off xref:glossar#notification[notifications] in the site before the update -- for similar reasons to those we explained in the previous section on automatic agent updates.
This way you avoid your colleagues from the monitoring team receiving _unnecessary_ notifications.

You can turn off notifications centrally with the main [.guihint]#Notifications# switch in the xref:user_interface#master_control[Master control] snap-in.

It may happen that after the update one or another service is {CRIT} which had not been the case previously.
Take care of new problems after the update for example, in the xref:user_interface#overview[Overview] snap-in.

[IMPORTANT]
====
Don't forget to turn on the notifications again, e.g. when following the update the number of unhandled problems has leveled off to the level seen before the update.
====


[#update_distributed_monitoring]
=== Updates in distributed monitoring

There are two different procedures for performing an update of all sites included in a xref:glossar#distributed_monitoring[distributed monitoring]:

* Stop all sites, perform the update of all sites in a bulk action, and then restart all sites.
* Under strict conditions, a _mixed operation_ is possible for a certain period of time, in which the remote sites are updated first, following which version equivalency is restored with the update of the central site.

In particular, if you want to update while the system is running, you should read the notes in the general article on xref:update#updatedistributed[Updates and Upgrades].


=== Performing the update

Nothing fundamental has changed with the actual update of the software in {CMK} {v24}, 
i.e. you install the new version, perform the update of the {CMK} site, rectify any possible conflicts and check and confirm the incompatible changes.

Perform the update procedure as described in the article on xref:update#detailed[Updates and Upgrades].


[#follow-up]
== Follow-ups

[#gui]
=== Changes to the user interface

The {CMK} user interface (GUI), which was completely redesigned with version {v20}, has not been changed fundamentally in version {v24}.
The general procedures, which you are already familiar with from versions {v20} to {v23}, can also be used as they are in {v24}.
However, menus, menu items, icons, and other details have been modified to make new features available -- and to improve existing ones.

We will present these changes in this User Guide's articles -- and in the xref:intro_setup#[Beginner's Guide] you will find a detailed introduction,
including the most important elements of the xref:intro_gui#[user interface].


[#service_discovery]
=== Updating services

As with every major version, {CMK} {v24} introduces a whole new set of check plug-ins.
If you do not use the xref:wato_services#discovery_check['discovery check'], i.e. the automatic update of the service configuration via the periodic service discovery, you will have to search for services on quite a number of hosts.

If your hosts are organized accordingly (e.g. in folders), you can generally use the [.guihint]#Bulk discovery# function for this.
This function can be found under [.guihint]#Setup > Hosts > Hosts# and then in the [.guihint]#Hosts > Run bulk service discovery# menu.


[#service_names]
==== Service names

Each update of {CMK} will involve changing service names to improve the consistency of naming within the monitoring and documentation of {CMK}.
Since changing service names means that rules sometimes need to be modified and historical monitoring data can be lost, {CMK} initially leaves the old names in place for updates.
For services where the loss of old monitoring data is acceptable and the effort for adapting rules is manageable, you should switch to new service names as soon as possible.

To do this, go to [.guihint]#Setup > General > Global settings > Execution of checks# and go through the list [.guihint]#Use new service names# and identify the services where the checkboxes are not yet active and activate them.
After applying the changes, the new service names will be active and a few minutes will pass before you see the defined states of the affected services in the monitoring again.


[#vanishedstuff]
=== Vanished services

In some cases, check plug-ins had to be moved out, or check plug-ins had to switch to new APIs.

*Does this affect you?*
The risk of being affected is present if you monitor hardware with very long lifecycle, especially with special agents.
During the preparations for the update from {v23} to {v24}, for example, we noticed the special agents for many NetApp devices, which we had to switch from the discontinued _ZAPI_ to the more modern REST API (link:https://checkmk.com/werk/16767[Werk #16767^]).
For licensing reasons, we had to move the agent for Dell PowerConnect to a separate link:https://exchange.checkmk.com/p/dell-powerconnect[package^] available in the Exchange (link:https://checkmk.com/werk/15359[Werk #15359^]).

*What will you need to do?*
If services disappear after the update, search the Werks for the manufacturer of the monitored products.
In most cases, you will have to switch to new APIs or, in rare cases, use packages from the Exchange to monitor a specific hardware or software component.


[#pip3post]
=== Installing Python modules

*Does this affect you?*
This will only apply to you if you have explicitly installed Python modules for special agents or agent-based check plug-ins that you have written yourself or obtained from the Exchange and have xref:pip3[removed] these in the course of preparing for the update.

.What do you need to do? Reinstall Python modules
[%collapsible]
====
First find out whether the previously uninstalled modules have already been delivered with the new {CMK} version, for example:

[{shell}]
----
{c-omd} pip3 list | grep '^cryptography'
----

If the module has already been found, mark it as not required in your notes.
Install the latest version of any modules that are not included:

[{shell}]
----
{c-omd} pip3 install ecdsa
----

Then test the check plug-ins or special agents that rely on Python modules installed in the site.
====


[#outlook]
== The outlook

This chapter covers topics not directly related to the current {CMK} version {v24}, rather to future versions in development.


[#check_http]
=== Old HTTP check will be removed

Since {v23} {CMK} already contains a new active check for HTTP connections and certificates.
The [.guihint]#Check HTTP web service# can be found under [.guihint]#Setup > Services > HTTP, TCP, Email, ...# in the [.guihint]#Networking# box.
The new check is significantly better performing, more robust and easier to configure than the previous [.guihint]#Check HTTP service#.
In addition, it is now possible to monitor several things at once with a single rule, for example HTTP response code, response time and certificate validity.

In {CMK} {v24} some rarely-used options within the old check have been added to the new check to make migration easier.
Furthermore, we provide a migration script that maps existing calls and resulting services 1:1.
Use this script to convert services from the old to the new active check, since with {CMK} {v25} no new rules can be configured for the old check.
It will be completely removed later.

Once the migration has been completed, you can achieve significant performance benefits by merging multiple rules, allowing a single execution of the check to produce multiple outputs, thus reducing CPU overhead.
In many cases you can also generate multiple services using a single rule in the new check.

General information on the new check can be found in the two Werks link:https://checkmk.com/werk/15514[pass:q[#]15514^] and link:https://checkmk.com/werk/15515[pass:q[#]15515^].
Werk link:https://checkmk.com/werk/17725[pass:q[#]17725^] describes the migration script.
A detailed https://checkmk.com/blog/migrating-new-http-active-check[blog article^] explains the details of the possibilities, limitations and best practices for preparing and following up the migration. 

If you come across applications in which the new check _cannot_ replace the old one, you can display the command line used in the same way as in link:https://checkmk.com/blog/how-monitor-servers-broken-tls-checkmk[the procedure described here^].
You will then have the option of calling the old check, or a system-wide installed `check_http` via [guihint]#Setup > Other services > Integrate Nagios plugins#.


[#management_board]
=== Management boards

The term _management board_ stands for separate plug-in cards or extended BIOS functionality (Baseboard Management Controller/BMC, Management Engine/ME, Lights Out Management/LOM) for monitoring and managing the hardware in addition to the installed operating system.

Up to {CMK} {v24}, management boards can be configured in two ways:
As a host property or as a separate host.
As the configurability as a host property is very limited, in the future this option will no longer be available.

Support for Redfish compatible management boards has been added and improved during the lifecycle of {CMK} {v23}, initially as an optional MKP (link:https://checkmk.com/werk/16589[Werk pass:q[#]16589^]).
In {CMK} {v24}, Redfish monitoring is an integral part of the software (link:https://checkmk.com/werk/17404[Werk pass:q[#]17404^]).
We explain additional background information and possible alternatives in the link:https://checkmk.com/blog/monitoring-management-boards[Monitoring management boards^] blog article.
