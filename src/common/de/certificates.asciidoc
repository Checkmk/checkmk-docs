// -*- coding: utf-8 -*-
// IGNORE 
include::global_attr.adoc[]
= Interne Zertifikate (Certificate overview page)
// Darf die Headline länger als eine Zeile sein? Sollte der englische Begriff auch im Deutschen schon in die Headline? Sonst würde ich hier gerne "Interne Zertifikate in Checkmk" schreiben.
// :experimental: wird bloß für experimentelle Features benötigt, die nicht auf Laufzeit und Memory optimiert wurden. Hier nicht benötigt.
:title: Certificate Overview Page
:description: Die Certificate overview in der {CMK}-GUI listet die internen Zertifikate griffbereit auf. Lesen Sie hier, welche Informationen Sie diesem Feature entnehmen können und welchem Zweck die Übersicht dient.

{related-start}
link:ports[Referenzartikel zu den Ports in {CMK}]
link:omd_https[Die Weboberfläche mit HTTPS absichern]
link:distributed_monitoring[Verteiltes Monitoring mit {CMK}]
link:security[Übersicht über die Sicherheits-Features in Checkmk]
{related-end}

// hier die verlinkbaren Artikel reinsetzen stattdessen.

// Elemente des Artikels: Einleitung, Screenshot, Referenztabelle. Scope eng halten.

== Einleitung
// erläutert, grenzt ab, mit Screenshot

Certificate Authorities (CA) sind vertrauenswürdige Stellen, die die interne Kommunikation durch die Ausgabe von Zertifikaten absichern, etwa zwischen einer Instanz und den ihr zugeordneten Hosts sowie zwischen den Instanzen im verteilten Monitoring. Checkmk sichert Monitoring-Instanzen über eigene CAs ab. Dabei ist zunächst unerheblich, welche Edition Sie für Ihr Monitoring im Einsatz haben oder in welchem Setup Sie Systeme überwachen: Checkmk stattet im Hintergrund alle Monitoring-Instanzen automatisch mit eigenen CAs und internen Zertifikaten aus, die für den Betrieb und für die interne Kommunikation der Instanzen grundlegend sind. 

Über Setup > Maintenance > Certificate overview gelangen Sie innerhalb der grafischen Benutzeroberfläche von Checkmk in einen Bereich, der diese internen Zertifikate auflistet: die Certificate overview page. Die Oberfläche dieses Features sieht in allen Editionen identisch aus und präsentiert auf einen Blick alle grundlegenden Zertifikate, die beim Einrichten Ihrer Instanz Checkmk-seitig erstellt wurden. 

Die Seite hat reinen Informationscharakter und dient als interner Schnellzugriff -- etwa, um die Gültigkeit und die Fingerprints der vorinstallierten Zertifikate zu überprüfen. Beim Verdacht auf Zertifikatsprobleme kann die Übersicht das Troubleshooting beschleunigen. Dafür ist die Certificate overview page die erste Anlaufstelle. 

Drei Certificate Authorities (CA) werden beim Erzeugen einer Checkmk-Instanz stets individuell erzeugt. Deren CA-Zertifikate sind entsprechend hier als Herausgeberzertifikate in den Rubriken "Subject" und "Issuer" namentlich verzeichnet: 

* eine CA zum Signieren des Agenten der Instanz (Site 'Instanzname' agent signing CA)
* eine CA als lokaler Message Broker (Site 'Instanzname' broker CA)
* eine CA für die Absicherung der Distributed Piggyback-Kommunikation (Site 'Instanzname' local CA)
// Abgrenzungsproblem wegen inkonsistenter Terminologie: unsere IT verwendet den Begriff CA etwas "sloppy". Mal ist mit CA die Herausgeberin von Zertifikaten gemeint, mal steht CA für das Herausgeberzertifikat/CA-Zertifikat. Wir wollen so präzise wie möglich formulieren, dabei aber offen bleiben für künftige Umbenennungen. Es ist schwierig, etwas präzise zu beschreiben, was in der Software unpräzise bleibt. 


//SCREENSHOT HIER EINBAUEN
// Dann vollständige Liste als Referenztabelle: alle 5 
// Schlüssellänge etc. kann sich ändern, die sollen User in ihren eigenen Instanzen anschauen. 
// Rein muss: kein Anspruch auf Vollständigkeit
// Bezeichnung des Zertifikats, Typ des Zertifikats: Handelt es sich um ein CA-Zertifikat oder um eines, mit dem Kommunikation abgesichert wird?
// Dann Link zu der Komponente. 
// Dann: Abgrenzung zu omd_https, separat: Expliziter Hinweis evtl. als Admonition oder unter die Tabelle, dass die Zertifikate für die HTTPS-Kommunikation in der Verantwortung der Server-Admins liegen und auf omd_https verlinken. 

Zudem listet die Certificate overview page zwei Zertifikate auf: 

* das lokale Message-Broker-Zertifikat (ausgestellt von der lokalen Message-Broker-CA) und
* das Root-Zertifikat der Instanz.

== Screenshot 

// Den Übersichts-Screenshot als Lightbox (fullscreen=1) einfügen. Genaue Platzierung folgt. 

// Warum ist das so, dass Cmk eine eigene CA hat/ mitliefert? Sukzessive aufbaubar.

// Hier werden die Zertifikate für die interne Kommunikation beschrieben:
// Root-Zertifikat. 
// Site-Zertifikat für die mTLS-Kommunikation zwischen Agent Controller und Agent Receiver. 
// Local Message Broker CA und 
// Zertifikat für die Absicherung der Distributed Piggyback-Kommunikation. 
// Letztes Zertifikat Signing Agent: Für das m in mTLS zuständig, weil den Zertifikaten gegenseitig vertraut werden muss. 

//Das sind die Stichwörter, nach denen ich suchen muss im Handbuch.

== Referenztabelle


// Einen direkten Nutzen für die Anwenderinnen und Anwender erfüllt diese Seite nicht. Sie dient einemn internen Zweck als Schnellzugriff für das Troubleshooting durch Checkmk-Consultants, die hier auf einen Blick die drei Checkmk-eigenen Certificate Authorities finden, die Ihre Instanz absichern. 

// Scope eng halten. Consultants machen damit was. Seite ist eine reine Information zur Recherche. Ich habe ein Problem, ich möchte etwas wissen - nicht: ich möchte etwas tun. Informationsseite. Es gibt hier nichts zu tun. Scope: diese Seite, die Certificate Overview Page. Wenn ich ein Problem habe mit Zertifikaten, die von Checkmk selbst ausgestellt werden, ist das die erste Anlaufstelle. 

// Information reinbringen: Wie sie mit anderen Bereichen zusammenhängt. "Wenn du mehr Informationen zu xy haben willst... dann schau hier: ... (Link)" ----> Wo werden die Zertifikate benutzt? Querverweis auf die Artikel. "Guck dir das an, dann siehst du unter Umständen schon, woran es liegen könnte."



// ... zwischen Central und Remote site. Für REST-API etc. geh rüber zu omd_https. Möglicherweise reicht eine Tabelle, von der aus die Leser in die jeweiligen Artikel weitergeschickt werden. Livestatus-Zertifikate > Remote und Central site etc.

// Abgrenzung: Für die Zertifikate des System-Apache ist der Nutzer selber verantwortlich. Diese Zertifikate sind relevant für Agenten-Update, REST-API und Web-Interface. Hier ist noch zu erwähnen, dass auch in einem Distributed Setup (in einem verteilten Monitoring mit einem zentralen Setup) die Propagation von Einstellungen über eine REST-API läuft und hinsichtlich des System-Apache: omd_https. 

// Für die 2.5 müssen wir nochmal ran. Für die 2.4 haben wir erstmal alles, was rein muss.

// Wir haben noch keine Möglichkeit, die Zertifikate auszutauschen zurzeit. Ist der Download-Button schon drin? 

// Nachgeschaut: Button, um Zertifikate auch herunterzuladen: existiert noch nicht. Künftige Erweiterung: Den Austausch von Zertifikaten zu beschreiben, wenn Zertifikate kompromittiert sind. Da gibt es bisher eine Möglichkeit, das auf der Kommandozeile zu tun (sagte Max, siehe Notizen). Sehr hacky, eher für die KB. 


